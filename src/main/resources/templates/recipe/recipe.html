<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments.html :: head"></head>
<body>
<header th:replace="fragments.html :: header"></header>

<div class="container">
    <div class="mt-3 text-right">
        <a class="btn btn-warning" th:if="${#authentication.name == recipe.member.email}"
           th:href="@{'/modify/'+${recipe.id}(page=${param.page}, keyword=${param.keyword})}">수정</a>
        <a class="btn btn-success" th:href="@{/(page=${param.page}, keyword=${param.keyword})}">목록</a>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <div class="card mt-4">
                <div class="card-body">
                    <p>게시물 번호 <span id="id" th:text="${recipe.id}"></span></p>
                    <h3 class="card-title">
                        <span th:text="${recipe.title}"></span>
                    </h3>
                    <figure class="figure m-0">
                        <img th:if="${recipe.thumbnail != null}" th:src="${recipe.thumbnail}"
                             class="figure-img img-fluid rounded p-3" alt="...">
                        <p class="m-1" th:text="${recipe.description}"></p>
                    </figure>
                    <div id="is-not-already-like">
                        <h3 class="text-muted">
                            <a href="#" id="like" class="text-decoration-none text-secondary">
                                <i id="like-logo" class="bi bi-bookmark-heart"></i>
                                <span class="like-count"></span>
                            </a>
                        </h3>
                    </div>
                    <div id="is-already-like" style="display: none">
                        <h3 class="text-muted">
                            <a href="#" id="cancel-like" class="text-decoration-none text-warning">
                                <i class="bi bi-bookmark-heart-fill"></i>
                                <span class="like-count">99</span>
                            </a>
                        </h3>
                    </div>
                    <div class="d-flex justify-content-between align-items-center">
                        <small class="text-muted">조회수 <span th:text="${recipe.viewCount}"></span>회</small>
                    </div>
                </div>
            </div>
            <!-- /.card -->

            <div class="card card-outline-secondary my-4">
                <div class="card-header">
                    <h4>재료</h4>
                </div>
                <div class="card-body">
                    <h6 th:text="${recipe.servings}+'인 기준'"></h6>
                    <th:block th:each="ingredient:${recipe.ingredients}">
                        <span th:text="${ingredient.ingredient}"></span>
                        <span th:if="${ingredient.quantity != null}" th:text="'('+ ${ingredient.quantity} +')'"></span>
                        <span>,</span>
                    </th:block>
                </div>
            </div>

            <div class="card card-outline-secondary my-4">
                <div class="card-header">
                    <h4>과정</h4>
                </div>
                <div class="card-body">
                    <div th:if="${!recipe.cookingMethods.isEmpty()}" th:each="method : ${recipe.cookingMethods}">
                        <h6 th:text="${method.sequence} + '. '+ ${method.description}"></h6>
                        <img class="bd-placeholder-img card-img-top img-thumbnail" th:src="${method.image}">
                        <hr>
                    </div>
                    <div th:if="${recipe.cookingMethods.isEmpty()}">
                        <div class="col-10 pt-3" th:utext="${recipe.fullDescription}"></div>
                    </div>
                    S
                </div>
            </div>
        </div>
    </div>
</div>

<footer th:replace="fragments.html :: footer"></footer>

<script src="/js/like.js">
</script>
</body>
</html>