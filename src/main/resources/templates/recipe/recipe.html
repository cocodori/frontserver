<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="fragments.html :: head"></head>
<body>
<header th:replace="fragments.html :: header"></header>

<div class="container">
    <div class="mt-3 text-right">
        <a class="btn btn-warning" th:if="${#authentication.name == recipe.member.email}"
           th:href="@{'/modify/'+${recipe.id}(page=${param.page}, keyword=${param.keyword})}">수정</a>
        <a class="btn btn-success" th:href="@{/(page=${param.page}, keyword=${param.keyword})}">목록</a>
    </div>
    <div class="row">
        <div class="col-lg-12">
            <div class="card mt-4">
                <img class="rounded mx-auto d-block img-thumbnail w-50 h-50"
                     th:if="${recipe.thumbnail != null}" th:src="${recipe.thumbnail}" alt="">
                <div class="card-body">
                    <h3 class="card-title">
                        <span th:text="${recipe.title}"></span>
                    </h3>
                    <h6 th:text="${recipe.description}"></h6>
                </div>
            </div>
            <!-- /.card -->

            <div class="card card-outline-secondary my-4">
                <div class="card-header">
                    <h4>재료</h4>
                </div>
                <div class="card-body">
                    <h6 th:text="${recipe.servings}+'인 기준'"></h6>
                    <th:block th:each="ingredient:${recipe.ingredients}">
                        <span th:text="${ingredient.ingredient}"></span>
                        <span th:if="${ingredient.quantity != null}" th:text="'('+ ${ingredient.quantity} +')'"></span>
                        <span>,</span>
                    </th:block>
                </div>
            </div>

            <div class="card card-outline-secondary my-4">
                <div class="card-header">
                    <h4>과정</h4>
                </div>
                <div class="card-body">
                    <div th:if="${!recipe.cookingMethods.isEmpty()}" th:each="method : ${recipe.cookingMethods}">
                        <h6 th:text="${method.sequence} + '. '+ ${method.description}"></h6>
                        <img th:src="${method.image}">
                        <hr>
                    </div>
                    <div th:if="${recipe.cookingMethods.isEmpty()}">
                        <div class="col-10 pt-3" th:utext="${recipe.fullDescription}"></div>
                    </div>S
                </div>
            </div>
            <!-- /.card -->

        </div>
        <!-- /.col-lg-9 -->

    </div>

</div>

<footer th:replace="fragments.html :: footer"></footer>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ygbV9kiqUc6oa4msXn9868pTtWMgiQaeYH7/t7LECLbyPA2x65Kgf80OJFdroafW"
        crossorigin="anonymous"></script>

<script>
    $('body').scrollspy({target: '#navbar-example'})
</script>
</body>
</html>